{"version":3,"sources":["./src/app/@pages/ofertas/campanha/campanha.module.ts","./src/app/@pages/ofertas/campanha/campanha.component.ts","./src/app/@pages/ofertas/campanha/campanha.component.html"],"names":[],"mappings":"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","file":"pages-ofertas-campanha-campanha-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\n\nimport { CampanhaComponent } from './campanha.component';\n\nconst app: Routes = [\n  { path: ':slug', component: CampanhaComponent },\n];\n\n@NgModule({\n  declarations: [CampanhaComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    SemDataModule,\n    ProductModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app)\n  ]\n})\nexport class CampanhaModule { }\n","import { StorageMap } from '@ngx-pwa/local-storage';\nimport { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { Subscription, Observable } from 'rxjs';\nimport { map, tap, delay } from 'rxjs/operators';\n\nimport { SeoService } from '@core/services/seo.service';\nimport { DataService } from '@core/services/data.service';\nimport { NewsService } from '@core/services/news.service';\nimport { UtilService } from '@core/services/util.service';\nimport { Campanha } from '@core/interfaces/news';\n\n\n@Component({\n  selector: 'app-campanha',\n  templateUrl: './campanha.component.html',\n  styleUrls: ['./campanha.component.scss']\n})\nexport class CampanhaComponent implements OnInit {\n\n  subscription: Subscription;\n\n  p: number = 1;\n  search: string = '';\n  str: number;\n\n  view: boolean = true;\n  init: boolean = false;\n\n  loja: any = [];\n  menu: any = [];\n  items: any = [];\n  departamento: any = [];\n\n  slug$: Observable<string>;\n  campanha$: Observable<Campanha>;\n\n  constructor(\n    private act: ActivatedRoute,\n    private news: NewsService,\n    private util: UtilService,\n    private db: DataService,\n    private seo: SeoService,\n    private router: Router,\n    private storageMap: StorageMap\n  ) { }\n\n  ngOnInit(): void {\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.getCampanha(data));\n  }\n\n  getCampanha = (slug: string) => {\n    this.campanha$ = this.news.Campanha(slug).pipe(\n      map((res) => res[0]), tap((res) => this.proccess(res)), delay(1000)\n    );\n  }\n\n  private proccess = (res: any) => {\n    this.setSeo(res);\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      if (res.code) {\n        this.getMenuDepartamentoCampanha(loja, res.code);\n        this.items = this.db.OfertasLojaCampanha(loja, res.code, 60);\n      } else {\n        this.getMenuDepartamentoSlug(loja, res.slugCampanha);\n        this.items = this.db.OfertasLojaSlug(loja, res.slugCampanha, 60);\n      }\n    })\n  }\n\n  getMenuDepartamentoSlug = (loja: number, slug: string) => {\n    this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaSlug?loja=${loja}&slug=${slug}`);\n  }\n\n  getMenuDepartamentoCampanha = (loja: number, campanha: number) => {\n    this.departamento = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaCampanha?loja=${loja}&campanha=${campanha}`);\n  }\n\n  toogle = (str: number) => {\n    this.str = str;\n    this.view = !this.view;\n  }\n\n  private setSeo = (item: any) => {\n    this.seo.addCanonical();\n    this.seo.updateTags({\n      title: `Confira as ${item.title} | Condor.com.br`,\n      description: 'Compre Online, Confira os Tabloides ou encontre o Supermercado Condor mais próximo! Toda loja em até 6x, Bazar em até 10x e Eletro em até 20x Sem Juros*',\n      image: 'https://www.condor.com.br/assets/images/sem-imagem.jpg'\n    });\n    this.seo.addCanonical();\n    this.seo.dataLayerPage(item.title);\n  }\n}\n","<section id=\"departamento\" class=\"py-3 py-md-5\" *ngIf=\"(campanha$ | async) as campanha; else semData\">\n    <div class=\"container\">\n        <div class=\"d-lg-none\">\n            <img *ngIf=\"campanha['full']\" [src]=\"campanha['full']\" alt=\"{{ campanha['title'] }}\" class=\"w-100 mb-2\">\n            <h2 *ngIf=\"!campanha['full']\" class=\"b-08 text-mute text-center pb-1 border-bottom mb-3\">{{ campanha['title'] }}</h2>\n        </div>\n        <div class=\"row no-gutters justify-content-center\">\n          <div class=\"col-12\">\n              <div class=\"d-none d-lg-block\">\n                  <img *ngIf=\"campanha['full']\" [src]=\"campanha['full']\" alt=\"{{ campanha['title'] }}\" class=\"w-100 mb-2\">\n                  <h2 *ngIf=\"!campanha['full']\" class=\"b-08 text-mute\"> {{ campanha['title'] }}</h2>\n              </div>\n              <div class=\"row mt-3\">\n                  <div class=\"col-6 col-md-4 col-lg-3 mb-4\"\n                      *ngFor=\"let a of items | async | paginate: { itemsPerPage: 12, currentPage: p }\">\n                      <app-product [code]=\"a\"></app-product>\n                  </div>\n              </div>\n              <div class=\"mt-5\">\n                  <pagination-controls class=\"animated fade text-center mt-5 border-top pt-1\"\n                      (pageChange)=\"p = $event\" previousLabel=\"Anterior\" nextLabel=\"Próximo\" responsive=\"true\">\n                  </pagination-controls>\n              </div>\n          </div>\n        </div>\n    </div>\n</section>\n<ng-template #semData>\n  <app-sem-data></app-sem-data>\n</ng-template>\n\n\n\n"],"sourceRoot":"webpack:///"}