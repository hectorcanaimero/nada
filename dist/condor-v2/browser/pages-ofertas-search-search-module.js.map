{"version":3,"sources":["./src/app/@pages/ofertas/search/search.module.ts","./src/app/@pages/ofertas/search/search.component.ts","./src/app/@pages/ofertas/search/search.component.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AACQ;AACG;AAEH;AACS;AACA;AAEX;;;AAErD,MAAM,GAAG,GAAW,CAAE,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,iEAAe,EAAE,CAAE,CAAC;AAa/D,MAAM,YAAY;;2FAAZ,YAAY;kJAAZ,YAAY,kBATd;YACP,oEAAW;YACX,4DAAY;YACZ,6EAAa;YACb,uEAAkB;YAClB,6EAAa;YACb,4DAAY,CAAC,QAAQ,CAAC,GAAG,CAAC;SAC3B;mIAEU,YAAY,mBAVR,iEAAe,aAE5B,oEAAW;QACX,4DAAY;QACZ,6EAAa;QACb,uEAAkB;QAClB,6EAAa;6FAIJ,YAAY;cAXxB,sDAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,iEAAe,CAAC;gBAC/B,OAAO,EAAE;oBACP,oEAAW;oBACX,4DAAY;oBACZ,6EAAa;oBACb,uEAAkB;oBAClB,6EAAa;oBACb,4DAAY,CAAC,QAAQ,CAAC,GAAG,CAAC;iBAC3B;aACF;;;;;;;;;;;;;;ACvBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AAKb;;;;;;;;;;;ICDzB,yEACI;IAAA,4EAAyC;IAC7C,4DAAM;;;IADW,0DAAa;IAAb,yEAAa;;ADYnC,MAAM,eAAe;IAS1B,YACU,GAAe,EACf,IAAiB,EACjB,EAAe,EACf,GAAmB,EACnB,UAAsB;QAJtB,QAAG,GAAH,GAAG,CAAY;QACf,SAAI,GAAJ,IAAI,CAAa;QACjB,OAAE,GAAF,EAAE,CAAa;QACf,QAAG,GAAH,GAAG,CAAgB;QACnB,eAAU,GAAV,UAAU,CAAY;QAXhC,SAAI,GAAQ,EAAE,CAAC;QACf,UAAK,GAAQ,EAAE,CAAC;QAChB,SAAI,GAAQ,EAAE,CAAC;QACf,YAAO,GAAQ,EAAE,CAAC;QAClB,YAAO,GAAW,EAAE,CAAC;IAQjB,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;QACxB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,0DAAG,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACzB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,EAAE,GAAG,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAC9B,CAAC;IAED,MAAM,CAAC,IAAY;QACjB,IAAI,OAAO,GAAQ,EAAE,CAAC;QACtB,MAAM,KAAK,GAAQ,EAAE,CAAC;QACtB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACzC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE;YACnD,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,SAAS,CAC5B,GAAG,CAAC,EAAE;gBACJ,kCAAkC;gBAClC,KAAK,MAAM,CAAC,IAAI,GAAG,EAAE;oBACnB,kCAAkC;oBAClC,KAAK,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE;wBAC9B,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI,EAAC;4BACnC,OAAO,GAAG;gCACR,UAAU,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU;gCACxC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ;gCACpC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM;gCAChC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI;gCAC5B,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI;gCAC5B,YAAY,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY;gCAC5C,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI;gCAC5B,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa;gCAC9C,eAAe,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,eAAe;gCAClD,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW;gCAC1C,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW;gCAC1C,aAAa,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa;gCAC9C,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS;gCACtC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;gCAClC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO;gCAClC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;6BACjB,CAAC;4BACF,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;yBACrB;qBACF;iBACF;gBACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACnB,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;oBACzB,IAAI,CAAC,OAAO,GAAG,yCAAyC,MAAM,IAAI,CAAC;oBACnE,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC;wBACzB,KAAK,EAAE,YAAY;wBACnB,UAAU,EAAE,MAAM;qBACnB,CAAC,CAAC;iBACJ;qBAAM;oBACL,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC;wBACzB,KAAK,EAAE,UAAU;wBACjB,UAAU,EAAE,MAAM;qBACnB,CAAC,CAAC;oBACH,IAAI,CAAC,OAAO,GAAG,wGAAwG,CAAC;iBACzH;YACH,CAAC,EACD,GAAG,CAAC,EAAE;gBACJ,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC,CACF,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;;8EAhFU,eAAe;+FAAf,eAAe;QCjB5B,6EACI;QAAA,yEACI;QAAA,mEAA8D;QAC9D,yEACI;QAAA,2GACI;QAER,4DAAM;QACN,mFAEqB;QACzB,4DAAM;QACV,4DAAU;;QAViC,0DAAqB;QAArB,gJAAqB;QAEhB,0DAA0B;QAA1B,8EAA0B;QAI9C,0DAAgB;QAAhB,yEAAgB;;6FDS/B,eAAe;cAL3B,uDAAS;eAAC;gBACT,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,yBAAyB;gBACtC,SAAS,EAAE,CAAC,yBAAyB,CAAC;aACvC","file":"pages-ofertas-search-search-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { OfertasModule } from '@widgets/ofertas/ofertas.module';\nimport { ProductModule } from '@sharing/product/product.module';\n\nimport { SearchComponent } from './search.component';\n\nconst app: Routes = [ { path: ':slug', component: SearchComponent } ];\n\n@NgModule({\n  declarations: [SearchComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    ProductModule,\n    MDBBootstrapModule,\n    OfertasModule,\n    RouterModule.forChild(app)\n  ]\n})\nexport class SearchModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { StorageMap } from '@ngx-pwa/local-storage';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { SeoService } from '@core/services/seo.service';\nimport { UtilService } from '@core/services/util.service';\nimport { DataService } from '@core/services/data.service';\n\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class SearchComponent implements OnInit {\n\n  slug: Observable<string>;\n  loja: any = [];\n  items: any = [];\n  fill: any = [];\n  product: any = [];\n  message: string = '';\n\n  constructor(\n    private seo: SeoService,\n    private util: UtilService,\n    private db: DataService,\n    private act: ActivatedRoute,\n    private storageMap: StorageMap\n  ) { }\n\n  ngOnInit(): void {\n    this.seo.addCanonical();\n    this.slug = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug.subscribe(data => {\n      this.Search(data);\n    }, err => console.log(err));\n  }\n\n  Search(slug: string) {\n    let ofertas: any = [];\n    const fills: any = [];\n    const text = slug.split('-').join('%20');\n    const search = slug.split('-').join(' ');\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      this.db.Search(text).subscribe(\n        res => {\n          // tslint:disable-next-line: forin\n          for (const k in res) {\n            // tslint:disable-next-line: forin\n            for (const i in res[k].ofertas) {\n              if (res[k].ofertas[i].loja === +loja){\n                ofertas = {\n                  campanhaId: res[k].ofertas[i].campanhaId,\n                  campanha: res[k].ofertas[i].campanha,\n                  hostId: res[k].ofertas[i].hostId,\n                  host: res[k].ofertas[i].host,\n                  loja: res[k].ofertas[i].loja,\n                  departamento: res[k].ofertas[i].departamento,\n                  slug: res[k].ofertas[i].slug,\n                  preco_regular: res[k].ofertas[i].preco_regular,\n                  parcela_regular: res[k].ofertas[i].parcela_regular,\n                  qtd_regular: res[k].ofertas[i].qtd_regular,\n                  preco_clube: res[k].ofertas[i].preco_clube,\n                  parcela_clube: res[k].ofertas[i].parcela_clube,\n                  qtd_clube: res[k].ofertas[i].qtd_clube,\n                  dsc_kit: res[k].ofertas[i].dsc_kit,\n                  cod_kit: res[k].ofertas[i].cod_kit,\n                  produtos: res[k]\n                };\n                fills.push(ofertas);\n              }\n            }\n          }\n          this.items = fills;\n          if (this.items.length > 0) {\n            this.message = `Ofertas encontradas para a sua busca \"${search}\".`;\n            this.seo.dataLayerTracking({\n              event: 'siteSearch',\n              searchTerm: search\n            });\n          } else {\n            this.seo.dataLayerTracking({\n              event: 'notfound',\n              searchTerm: search\n            });\n            this.message = 'Esse produto não está disponível no site.<br>Mas aproveite as outras ofertas que preparamos para você.';\n          }\n        },\n        err => {\n          console.log(err);\n        }\n      );\n    });\n  }\n\n}\n","<section id=\"search\" class=\"p-y-3 py-md-5\">\n    <div class=\"container\">\n        <h1 class=\"h2-responsive b-7 mb-4\" [innerHTML]=\"message\"></h1>\n        <div class=\"row mb-4\">\n            <div class=\"col-md-4 mb-4 col-lg-3\" *ngFor=\"let item of items\">\n                <app-product [code]=\"item\"></app-product>\n            </div>\n        </div>\n        <app-widget-ofertas [code]=\"'geral'\" [sector]=\"product.setor\" title=\"Mais ofertas\"\n            icon=\"fas fa-shopping-basket\" type=\"slug\">\n        </app-widget-ofertas>\n    </div>\n</section>\n"],"sourceRoot":"webpack:///"}