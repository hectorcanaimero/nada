{"version":3,"sources":["webpack:///src/app/@pages/ofertas/sector/sector.component.html","webpack:///src/app/@pages/ofertas/sector/sector.module.ts","webpack:///src/app/@pages/ofertas/sector/sector.component.ts"],"names":["app","path","component","SectorComponent","router","db","seo","util","act","storageMap","isLoading","p","search","viewDepart","viewSector","init","url","menu","proccess","slug","this","addCanonical","getSector","nome","split","link","toSlug","menuSector$","getMenuOfertas","pipe","map","res","tap","dep_id","codigo","watchStorage","finalize","depId","watch","subscribe","loja","getMenuDepartamento","sector$","getCollection","items$","OfertasLojaDepartamentoSetor","data","filter","row","produtos","toogle","busca","e","target","value","Seo","title","setTitle","updateTagName","dataLayerPage","trackBy","index","item","slug$","paramMap","paramsMap","get","subscription","unsubscribe","SectorModule","forChild"],"mappings":"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","file":"x","sourcesContent":["<section id=\"sector\" class=\"py-5\" *ngIf=\"(menuSector$ | async) as path\">\n  <div class=\"container\">\n    <mdb-breadcrumb class=\"mb-5\">\n      <mdb-breadcrumb-item class=\"blue-text text-uppercase\" [routerLink]=\"['/departamento', url.link]\">\n        {{url.nome}}</mdb-breadcrumb-item>\n      <mdb-breadcrumb-item class=\"text-muted text-uppercase\"> {{ path['nome'] }} </mdb-breadcrumb-item>\n    </mdb-breadcrumb>\n    <div class=\"row ios justify-content-center\">\n      <div class=\"col-lg-4 col-xl-3 bg-red\">\n        <app-select-loja type=\"alert\"></app-select-loja>\n        <h5 class=\"border-bottom pb-1 b-06 my-4 text-capitalize\">{{url.nome}}</h5>\n        <div class=\"news my-4\">\n          <h5 class=\"b-07 border-bottom pb-1 mb-1\" (click)=\"toogle()\">\n            Setor <i class=\"fas float-right\" [ngClass]=\"{'fa-plus': !viewSector, 'fa-minus': viewSector}\"></i>\n          </h5>\n          <ul class=\"nav flex-column grey lighten-4 py-2 animated fadeIn faster\" data-wow-delay=\".1\" *ngIf=\"viewSector\">\n            <li class=\"nav-item\" *ngFor=\"let n of sector$ | async\" routerLinkActive=\"active\">\n              <a class=\"nav-link b-07 f-09\" [routerLink]=\"['/departamento', url.link, 'setor', n.slug]\">\n                {{ n.sector }}\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n        <div class=\"col-lg-8 col-xl-9\">\n          <h1 class=\"b-08 border-bottom pb-1 mb-3 text-capitalize\">{{ path['nome']  }}</h1>\n          <img src=\"./assets/images/banner_campanha.jpg\" onerror=\"this.style.display='none'\" class=\"img-fluid mb-4\"/>\n          <input type=\"text\" class=\"form-control\" placeholder=\"Procure produtos deste setor\" (change)=\"busca($event)\">\n          <div class=\"row mt-3\">\n            <div class=\"col-6 col-md-4 col-lg-4 col-xl-4 mb-3\"\n              *ngFor=\"let item of items$ | async | filtro: search:'dsc_produto'  | paginate: { itemsPerPage: 6, currentPage: p }; let i = index; trackBy: trackBy\">\n              <app-product [code]=\"item\"></app-product>\n            </div>\n          </div>\n          <div class=\"mt-5\">\n            <pagination-controls class=\"animated fade text-center mt-5 border-top pt-1\"\n                (pageChange)=\"p = $event\" previousLabel=\"Anterior\" nextLabel=\"PrÃ³ximo\" responsive=\"true\">\n            </pagination-controls>\n          </div>\n        </div>\n    </div>\n  </div>\n</section>\n<app-sem-data *ngIf=\"isLoading\"></app-sem-data>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\n\nimport { SectorComponent } from './sector.component';\n\nconst app: Routes = [\n  { path: ':slug', component: SectorComponent },\n];\n\n@NgModule({\n  declarations: [SectorComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    SemDataModule,\n    ProductModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app)\n  ]\n})\nexport class SectorModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { StorageMap } from '@ngx-pwa/local-storage';\nimport { Subscription, Observable } from 'rxjs';\nimport { map, tap, finalize } from 'rxjs/operators';\n\nimport { SeoService } from '@core/services/seo.service';\nimport { UtilService } from '@core/services/util.service';\nimport { DataService } from '@core/services/data.service';\nimport { MenuSetor } from '@core/interfaces/menu';\nimport { Ofertas } from '@core/interfaces/ofertas';\n\n@Component({\n  selector: 'app-sector',\n  templateUrl: './sector.component.html',\n  styleUrls: ['./sector.component.scss']\n})\nexport class SectorComponent implements OnInit, OnDestroy {\n\n  subscription: Subscription;\n  isLoading: boolean = false;\n  p: number = 1;\n  search: string = '';\n\n  viewDepart: boolean = true;\n  viewSector: boolean = true;\n  init: boolean = false;\n\n  url: any = [];\n  menu: any = [];\n  sector$: Observable<MenuSetor[]>;\n\n  slug$: Observable<string>;\n  items$: Observable<Ofertas[]>;\n  menuSector$: Observable<MenuSetor>;\n\n  constructor(\n    private router: Router,\n    private db: DataService,\n    private seo: SeoService,\n    private util: UtilService,\n    private act: ActivatedRoute,\n    private storageMap: StorageMap,\n  ) { }\n\n  ngOnInit(): void {\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.proccess(data));\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) { this.subscription.unsubscribe(); }\n  }\n\n  private proccess = (slug: any) => {\n    this.seo.addCanonical();\n    this.getSector(slug)\n  }\n\n  getSector = (slug: string) => {\n    this.isLoading = true;\n    this.url = { nome: this.router.url.split('/')[2], link: this.util.toSlug(this.router.url.split('/')[2]) };\n    this.menuSector$ = this.db.getMenuOfertas(`menuSetorSlug?slug=${slug}`).pipe(\n      map((res) => res[0]), tap(({ dep_id, codigo }) => this.watchStorage(dep_id, codigo),\n      finalize(() => this.isLoading = false))\n    );\n  }\n\n  private watchStorage = (depId: number, codigo: number) => {\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      this.getMenuDepartamento(loja);\n      this.sector$ = this.db.getCollection(`/Menus/MenuSectorOfertasLojaDepartamento?loja=${loja}&departamento=${depId}`);\n      this.items$ = this.db.OfertasLojaDepartamentoSetor(loja, depId, codigo).pipe(\n        map((data) => data.filter((row) => row.produtos))\n      );\n    })\n  }\n\n\n  getMenuDepartamento = (loja: number) => this.menu = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaDepartamento?loja=${loja}`);\n\n  toogle = () => this.viewSector = !this.viewSector;\n  busca = (e: any) => this.search = e.target.value;\n\n  private Seo = (title: string) => {\n    this.seo.addCanonical();\n    this.seo.setTitle(`${title} | Rede Condor`);\n    this.seo.updateTagName(`${title} | Rede Condor`);\n    this.seo.dataLayerPage(title);\n  }\n  trackBy = (index: number, item: any) => item[index];\n\n}\n"]}