{"version":3,"sources":["webpack:///src/app/@pages/ofertas/campanha/campanha.component.html","webpack:///src/app/@pages/ofertas/campanha/campanha.module.ts","webpack:///src/app/@pages/ofertas/campanha/campanha.component.ts"],"names":["app","path","component","CampanhaComponent","act","news","util","db","seo","router","storageMap","isLoading","p","search","view","init","loja","menu","departamento","getCampanha","slug","this","campanha$","Campanha","pipe","map","res","tap","proccess","setSeo","watch","subscribe","code","getMenuDepartamentoCampanha","items$","OfertasLojaCampanha","finalize","getMenuDepartamentoSlug","slugCampanha","OfertasLojaSlug","getCollection","campanha","toogle","str","item","addCanonical","updateTags","title","description","image","dataLayerPage","trackBy","index","slug$","paramMap","paramsMap","get","data","CampanhaModule","forChild"],"mappings":"kZAGY,iB,yBAAuD,oBAAzB,yB,yBAC9B,gBAAyF,QAAuB,Q,yBAAvB,uB,wBAKnF,iB,yBAAuD,oBAAzB,yB,yBAC9B,gBAAsD,QAAuB,Q,yBAAvB,8B,yBAGtD,iBAEI,yBACJ,Q,yBADiB,wB,yBAfnC,oBACI,gBACI,gBACI,sBACA,qBACJ,OACA,gBACE,gBACI,gBACI,sBACA,sBACJ,OACA,kBACI,wB,iBAIJ,OACJ,OACF,OACJ,OACJ,Q,6BAlBiB,4BACD,6BAKO,4BACD,6BAIA,4CAAkD,2B,qBAQxE,uBCRA,MAAMA,EAAc,CAClB,CAAEC,KAAM,QAASC,UCIZ,M,MAAMC,EAmBX,YACUC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GANA,KAAAN,MACA,KAAAC,OACA,KAAAC,OACA,KAAAC,KACA,KAAAC,MACA,KAAAC,SACA,KAAAC,aAvBV,KAAAC,WAAqB,EACrB,KAAAC,EAAY,EACZ,KAAAC,OAAiB,GAGjB,KAAAC,MAAgB,EAChB,KAAAC,MAAgB,EAEhB,KAAAC,KAAY,GACZ,KAAAC,KAAY,GAEZ,KAAAC,aAAoB,GAoBpB,KAAAC,YAAeC,IACbC,KAAKC,UAAYD,KAAKhB,KAAKkB,SAASH,GAAMI,KACxC,OAAAC,EAAA,GAAKC,GAAQA,EAAI,IAAK,OAAAC,EAAA,GAAKD,GAAQL,KAAKO,SAASF,MAG7C,KAAAE,SAAYF,IAClBL,KAAKV,WAAY,EACjBU,KAAKQ,OAAOH,GACZL,KAAKX,WAAWoB,MAAM,QAAQC,UAAU,EAAGf,WACrCU,EAAIM,MACNX,KAAKY,4BAA4BjB,EAAMU,EAAIM,MAC3CX,KAAKa,OAASb,KAAKd,GAAG4B,oBAAoBnB,EAAMU,EAAIM,KAAM,IAAIR,KAC5D,OAAAY,EAAA,GAAS,IAAMf,KAAKV,WAAY,MAGlCU,KAAKgB,wBAAwBrB,EAAMU,EAAIY,cACvCjB,KAAKa,OAASb,KAAKd,GAAGgC,gBAAgBvB,EAAMU,EAAIY,aAAc,IAAId,KAChE,OAAAY,EAAA,GAAS,IAAMf,KAAKV,WAAY,QAMxC,KAAA0B,wBAA0B,CAACrB,EAAcI,KACvCC,KAAKd,GAAGiC,cAAc,+CAA+CxB,UAAaI,MAGpF,KAAAa,4BAA8B,CAACjB,EAAcyB,KAC3CpB,KAAKH,aAAeG,KAAKd,GAAGiC,cAAc,mDAAmDxB,cAAiByB,MAGhH,KAAAC,OAAUC,IACRtB,KAAKsB,IAAMA,EACXtB,KAAKP,MAAQO,KAAKP,MAGZ,KAAAe,OAAUe,IAChBvB,KAAKb,IAAIqC,eACTxB,KAAKb,IAAIsC,WAAW,CAClBC,MAAO,cAAcH,EAAKG,wBAC1BC,YAAa,uKACbC,MAAO,2DAET5B,KAAKb,IAAIqC,eACTxB,KAAKb,IAAI0C,cAAcN,EAAKG,QAI9B,KAAAI,QAAU,CAACC,EAAeR,IAAcA,EAAKQ,GArD7C,WACE/B,KAAKgC,MAAQhC,KAAKjB,IAAIkD,SAAS9B,KAAK,OAAAC,EAAA,GAAI8B,GAAaA,EAAUC,IAAI,UACnEnC,KAAKgC,MAAMtB,UAAU0B,GAAQpC,KAAKF,YAAYsC,K,6CA/BrCtD,GAAiB,wE,uBAAjBA,EAAiB,ytBFnB9B,2B,gBAsBA,gC,MAtBgD,mCAsBlC,mC,mREHP,KDYA,Y,MAAMuD,G,8BAAAA,I,oDAAAA,IAAc,SAXhB,CACP,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IAAaC,SAAS3D,O,GAGnB","file":"x","sourcesContent":["<section id=\"departamento\" class=\"py-3 py-md-5\" *ngIf=\"(campanha$ | async) as campanha\">\n    <div class=\"container\">\n        <div class=\"d-lg-none\">\n            <img *ngIf=\"campanha['full']\" [src]=\"campanha['full']\" alt=\"{{ campanha['title'] }}\" class=\"w-100 mb-2\">\n            <h2 *ngIf=\"!campanha['full']\" class=\"b-08 text-mute text-center pb-1 border-bottom mb-3\">{{ campanha['title'] }}</h2>\n        </div>\n        <div class=\"row no-gutters justify-content-center\">\n          <div class=\"col-12\">\n              <div class=\"d-none d-lg-block\">\n                  <img *ngIf=\"campanha['full']\" [src]=\"campanha['full']\" alt=\"{{ campanha['title'] }}\" class=\"w-100 mb-2\">\n                  <h2 *ngIf=\"!campanha['full']\" class=\"b-08 text-mute\"> {{ campanha['title'] }}</h2>\n              </div>\n              <div class=\"row mt-3\">\n                  <div class=\"col-6 col-md-4 col-lg-3 mb-4\"\n                      *ngFor=\"let a of items$ | async; trackBy: trackBy\">\n                      <app-product [code]=\"a\"></app-product>\n                  </div>\n              </div>\n          </div>\n        </div>\n    </div>\n</section>\n<app-sem-data *ngIf=\"isLoading\"></app-sem-data>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\n\nimport { CampanhaComponent } from './campanha.component';\n\nconst app: Routes = [\n  { path: ':slug', component: CampanhaComponent },\n];\n\n@NgModule({\n  declarations: [CampanhaComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    SemDataModule,\n    ProductModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app)\n  ]\n})\nexport class CampanhaModule { }\n","import { StorageMap } from '@ngx-pwa/local-storage';\nimport { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { Subscription, Observable } from 'rxjs';\nimport { map, tap, delay, finalize } from 'rxjs/operators';\n\nimport { SeoService } from '@core/services/seo.service';\nimport { DataService } from '@core/services/data.service';\nimport { NewsService } from '@core/services/news.service';\nimport { UtilService } from '@core/services/util.service';\nimport { Campanha } from '@core/interfaces/news';\n\n\n@Component({\n  selector: 'app-campanha',\n  templateUrl: './campanha.component.html',\n  styleUrls: ['./campanha.component.scss']\n})\nexport class CampanhaComponent implements OnInit {\n\n  subscription: Subscription;\n  isLoading: boolean = false;\n  p: number = 1;\n  search: string = '';\n  str: number;\n\n  view: boolean = true;\n  init: boolean = false;\n\n  loja: any = [];\n  menu: any = [];\n  items$: Observable<any[]>;\n  departamento: any = [];\n\n  slug$: Observable<string>;\n  campanha$: Observable<Campanha>;\n\n  constructor(\n    private act: ActivatedRoute,\n    private news: NewsService,\n    private util: UtilService,\n    private db: DataService,\n    private seo: SeoService,\n    private router: Router,\n    private storageMap: StorageMap\n  ) { }\n\n  ngOnInit(): void {\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.getCampanha(data));\n  }\n\n  getCampanha = (slug: string) => {\n    this.campanha$ = this.news.Campanha(slug).pipe(\n      map((res) => res[0]), tap((res) => this.proccess(res)));\n  }\n\n  private proccess = (res: any) => {\n    this.isLoading  =false;\n    this.setSeo(res);\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      if (res.code) {\n        this.getMenuDepartamentoCampanha(loja, res.code);\n        this.items$ = this.db.OfertasLojaCampanha(loja, res.code, 60).pipe(\n          finalize(() => this.isLoading = false)\n        );\n      } else {\n        this.getMenuDepartamentoSlug(loja, res.slugCampanha);\n        this.items$ = this.db.OfertasLojaSlug(loja, res.slugCampanha, 60).pipe(\n          finalize(() => this.isLoading = false)\n        );\n      }\n    })\n  }\n\n  getMenuDepartamentoSlug = (loja: number, slug: string) => {\n    this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaSlug?loja=${loja}&slug=${slug}`);\n  }\n\n  getMenuDepartamentoCampanha = (loja: number, campanha: number) => {\n    this.departamento = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaCampanha?loja=${loja}&campanha=${campanha}`);\n  }\n\n  toogle = (str: number) => {\n    this.str = str;\n    this.view = !this.view;\n  }\n\n  private setSeo = (item: any) => {\n    this.seo.addCanonical();\n    this.seo.updateTags({\n      title: `Confira as ${item.title} | Condor.com.br`,\n      description: 'Compre Online, Confira os Tabloides ou encontre o Supermercado Condor mais próximo! Toda loja em até 6x, Bazar em até 10x e Eletro em até 20x Sem Juros*',\n      image: 'https://www.condor.com.br/assets/images/sem-imagem.jpg'\n    });\n    this.seo.addCanonical();\n    this.seo.dataLayerPage(item.title);\n  }\n\n\n  trackBy = (index: number, item: any) => item[index];\n}\n"]}