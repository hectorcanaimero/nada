{"version":3,"sources":["webpack:///src/app/@pages/ofertas/departamento/departamento.component.html","webpack:///src/app/@pages/ofertas/departamento/departamento.module.ts","webpack:///src/app/@pages/ofertas/departamento/departamento.component.ts","webpack:///src/app/@core/pipes/filtro.pipe.ts"],"names":["DepartamentoComponent","DepartamentoModule","app","path","component","router","db","seo","util","act","storageMap","p","itemsPerPage","currentPage","totalItem","search","isLoading","viewDepart","viewSector","init","loja","menu","getDepartamento","slug","console","log","this","menuDepartamento$","getMenuOfertas","pipe","map","res","tap","nome","codigo","proccess","getSeo","getData","watch","subscribe","menuSector$","getCollection","items$","OfertasLojaDepartamento","length","finalize","getMenuDepartamento","onSearch","e","target","value","toogleSector","toogleDepart","departamento","updateTags","title","description","image","addCanonical","dataLayerPage","pageChange","ev","data","slice","trackById","index","items","StorageParse","slug$","paramMap","paramsMap","get","subscription","unsubscribe","slide","loadChildren","then","mod","SectorModule","forChild","FiltroPipe","searchText","fieldName","toLowerCase","filter","item","includes"],"mappings":"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","file":"x","sourcesContent":["<section id=\"departamento\" class=\"py-3 py-md-5\" *ngIf=\"(menuDepartamento$ | async) as departamento\">\n  <div class=\"container\">\n    <mdb-breadcrumb class=\"mb-5\">\n      <mdb-breadcrumb-item class=\"blue-text text-uppercase d-none d-md-block\"\n        [routerLink]=\"['/departamento', (slug$ | async)]\">{{ departamento.nome }}</mdb-breadcrumb-item>\n    </mdb-breadcrumb>\n    <h1 class=\"b-08 border-bottom pb-1 mb-3 title\">{{ departamento.nome }}</h1>\n    <div class=\"row mobile ios justify-content-center\">\n      <div class=\"col-lg-4 col-xl-3 bg-red\">\n        <app-select-loja type=\"alert\"></app-select-loja>\n        <div class=\"news my-4\">\n          <h6 class=\"b-07 border-bottom pb-1 mb-1\" (click)=\"toogleSector()\">\n            {{ departamento.nome }}\n            <i class=\"fas float-right\" [ngClass]=\"viewSector ? 'fa-plus': 'fa-minus'\"></i>\n          </h6>\n          <div class=\"sector\">\n            <div class=\"row no-gutters\" [@slideDownInOut]=\"viewSector\">\n              <div class=\"col-6 col-md-12\" *ngFor=\"let s of menuSector$ | async; trackBy: trackById\">\n                <p>\n                  <a class=\"text\" [routerLink]=\"['/departamento', departamento.slug, 'setor', s.slug]\">\n                    {{ s.sector }}\n                  </a>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-8 col-xl-9\">\n        <div class=\"mobile\">\n          <div class=\"row mt-3\">\n            <img src=\"./assets/images/banner_campanha.jpg\" onerror=\"this.style.display='none'\" class=\"img-fluid mb-4\"/>\n              <div class=\"col-6 col-md-4 mb-3 mb-xl-4\"\n                *ngFor=\"let item of items$ | async | filtro: search:'dsc_produto'\">\n                <app-product [code]=\"item\"></app-product>\n              </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</section>\n<app-sem-data *ngIf=\"isLoading\"></app-sem-data>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport {NgxPaginationModule} from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\nimport { DepartamentoComponent } from './departamento.component';\n\nconst app: Routes = [\n  { path: ':slug', component: DepartamentoComponent },\n  { path: ':slug/setor', loadChildren: () => import('../sector/sector.module').then( mod => mod.SectorModule )}\n];\n\n@NgModule({\n  declarations: [DepartamentoComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    ProductModule,\n    SemDataModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app),\n  ]\n})\nexport class DepartamentoModule { }\n","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { StorageMap } from '@ngx-pwa/local-storage';\nimport { map, tap, delay, finalize } from 'rxjs/operators';\nimport { Subscription, Observable } from 'rxjs';\n\nimport { DataService } from '@core/services/data.service';\nimport { SeoService } from '@core/services/seo.service';\nimport { UtilService } from '@core/services/util.service';\nimport { MenuDepartamento, MenuSetor } from '@core/interfaces/menu';\nimport { Ofertas } from '@core/interfaces/ofertas';\nimport { slideDownInOut } from '@core/animations/slide';\n\n@Component({\n  selector: 'app-departamento',\n  templateUrl: './departamento.component.html',\n  styleUrls: ['./departamento.component.scss'],\n  animations: [ slideDownInOut ]\n})\nexport class DepartamentoComponent implements OnInit, OnDestroy {\n\n\n  subscription: Subscription;\n\n  p: number = 1;\n  itemsPerPage: number = 12;\n  currentPage: number = 1;\n  totalItem: number = 0;\n  search: string = '';\n  isLoading: boolean = false;\n  viewDepart: boolean = true;\n  viewSector: string = 'out';\n  init: boolean = false;\n\n  loja: any = [];\n  menu: any = [];\n  items$: Observable<Ofertas[]>;\n  menuSector$: Observable<MenuSetor[]>;\n  menuDepartamento$: Observable<MenuDepartamento[]>;\n\n  slug$: Observable<string>;\n\n  constructor(\n    private router: Router,\n    private db: DataService,\n    private seo: SeoService,\n    private util: UtilService,\n    private act: ActivatedRoute,\n    private storageMap: StorageMap\n  ) { }\n\n  ngOnInit(): void {\n    this.seo.addCanonical();\n    this.loja = this.util.StorageParse('Loja');\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.getDepartamento(data));\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) { this.subscription.unsubscribe(); }\n  }\n\n  getDepartamento = (slug: any) => {\n    console.log(slug);\n    this.menuDepartamento$ = this.db.getMenuOfertas(`menuDepartamentoSlug?slug=${slug}`).pipe(\n      map((res) => res[0]),\n      tap(({ nome, codigo }) => this.proccess(nome, codigo)),\n    )\n  }\n\n  private proccess = (nome: string, codigo: number) => {\n    this.getSeo(nome);\n    this.getData(codigo)\n  }\n\n  getData = (codigo: number) => {\n    this.isLoading = true;\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      this.menuSector$ = this.db.getCollection(`/Menus/MenuSectorOfertasLojaDepartamento?loja=${loja}&departamento=${codigo}`);\n      this.items$ = this.db.OfertasLojaDepartamento(loja, codigo).pipe(\n        tap((res) => this.totalItem = res.length),\n        finalize(() => this.isLoading = false));\n    })\n  }\n\n  getMenuDepartamento = (loja: number) => this.menu = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaDepartamento?loja=${loja}`);\n\n  onSearch = (e: any) => console.log(e.target.value);\n  toogleSector = () =>  this.viewSector = this.viewSector === 'out' ? 'in' : 'out';;\n  toogleDepart = () =>  this.viewDepart = !this.viewDepart;\n\n  getSeo = (departamento: string) => {\n    this.seo.updateTags({\n      title: `Confira as Ofertas de ${departamento} | Condor.com.br`,\n      description: 'Compre Online, Confira os Tabloides ou encontre o Supermercado Condor mais próximo! Toda loja em até 6x, Bazar em até 10x e Eletro em até 20x Sem Juros*',\n      image: 'https://www.condor.com.br/assets/images/sem-imagem.jpg'\n    });\n    this.seo.addCanonical();\n    this.seo.dataLayerPage(departamento);\n  }\n\n  pageChange = (ev: any) => {\n    console.log(ev);\n    this.itemsPerPage = ev -1;\n    const data = this.items$.pipe(map((res) => res.slice(this.itemsPerPage, this.itemsPerPage)))\n    this.items$ = data;\n  }\n\n  trackById = (index: number, items: any) => items[index];\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filtro'\n})\nexport class FiltroPipe implements PipeTransform {\n\n  transform(items: any[], searchText: string, fieldName: string): any {\n    if (!items) { return []; }\n    if (!searchText) { return items; }\n    searchText = `${searchText}`.toLowerCase();\n    return items.filter(item => {\n      if (item && item['produtos'][fieldName]) {\n        return `${item['produtos'][fieldName]}`.toLowerCase().includes(searchText);\n      }\n      return false;\n    });\n  }\n\n}\n"]}