{"version":3,"sources":["webpack:///src/app/@pages/ofertas/departamento/departamento.component.html","webpack:///src/app/@pages/ofertas/departamento/departamento.module.ts","webpack:///src/app/@pages/ofertas/departamento/departamento.component.ts","webpack:///src/app/@core/pipes/filtro.pipe.ts"],"names":["app","path","component","DepartamentoComponent","router","db","seo","util","act","storageMap","p","itemsPerPage","currentPage","totalItem","search","isLoading","viewDepart","viewSector","init","loja","menu","getDepartamento","slug","console","log","this","menuDepartamento$","getMenuOfertas","pipe","map","res","tap","nome","codigo","proccess","getSeo","getData","watch","subscribe","menuSector$","getCollection","items$","OfertasLojaDepartamento","length","finalize","getMenuDepartamento","onSearch","e","target","value","toogleSector","toogleDepart","departamento","updateTags","title","description","image","addCanonical","dataLayerPage","pageChange","ev","data","slice","trackById","index","items","StorageParse","slug$","paramMap","paramsMap","get","subscription","unsubscribe","slide","loadChildren","then","mod","SectorModule","DepartamentoModule","forChild","FiltroPipe","searchText","fieldName","toLowerCase","filter","item","includes"],"mappings":"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","file":"x","sourcesContent":["<section id=\"departamento\" class=\"py-3 py-md-5\" *ngIf=\"(menuDepartamento$ | async) as departamento\">\n  <div class=\"container\">\n    <mdb-breadcrumb class=\"mb-5\">\n      <mdb-breadcrumb-item class=\"blue-text text-uppercase d-none d-md-block\"\n        [routerLink]=\"['/departamento', (slug$ | async)]\">{{ departamento.nome }}</mdb-breadcrumb-item>\n    </mdb-breadcrumb>\n    <h1 class=\"b-08 border-bottom pb-1 mb-3 title\">{{ departamento.nome }}</h1>\n    <div class=\"row mobile ios justify-content-center\">\n      <div class=\"col-lg-4 col-xl-3 bg-red\">\n        <app-select-loja type=\"alert\"></app-select-loja>\n        <div class=\"news my-4\">\n          <h6 class=\"b-07 border-bottom pb-1 mb-1\" (click)=\"toogleSector()\">\n            {{ departamento.nome }}\n            <i class=\"fas float-right\" [ngClass]=\"viewSector ? 'fa-plus': 'fa-minus'\"></i>\n          </h6>\n          <div class=\"sector\">\n            <div class=\"row no-gutters\" [@slideDownInOut]=\"viewSector\">\n              <div class=\"col-6 col-md-12\" *ngFor=\"let s of menuSector$ | async; trackBy: trackById\">\n                <p>\n                  <a class=\"text\" [routerLink]=\"['/departamento', departamento.slug, 'setor', s.slug]\">\n                    {{ s.sector }}\n                  </a>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-8 col-xl-9\">\n        <div class=\"mobile\">\n          <div class=\"row mt-3\">\n            <img src=\"./assets/images/banner_campanha.jpg\" onerror=\"this.style.display='none'\" class=\"img-fluid mb-4\"/>\n              <div class=\"col-6 col-md-4 mb-3 mb-xl-4\"\n                *ngFor=\"let item of items$ | async | filtro: search:'dsc_produto'\">\n                <app-product [code]=\"item\"></app-product>\n              </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</section>\n<app-sem-data *ngIf=\"isLoading\"></app-sem-data>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport {NgxPaginationModule} from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\nimport { DepartamentoComponent } from './departamento.component';\n\nconst app: Routes = [\n  { path: ':slug', component: DepartamentoComponent },\n  { path: ':slug/setor', loadChildren: () => import('../sector/sector.module').then( mod => mod.SectorModule )}\n];\n\n@NgModule({\n  declarations: [DepartamentoComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    ProductModule,\n    SemDataModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app),\n  ]\n})\nexport class DepartamentoModule { }\n","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { StorageMap } from '@ngx-pwa/local-storage';\nimport { map, tap, delay, finalize } from 'rxjs/operators';\nimport { Subscription, Observable } from 'rxjs';\n\nimport { DataService } from '@core/services/data.service';\nimport { SeoService } from '@core/services/seo.service';\nimport { UtilService } from '@core/services/util.service';\nimport { MenuDepartamento, MenuSetor } from '@core/interfaces/menu';\nimport { Ofertas } from '@core/interfaces/ofertas';\nimport { slideDownInOut } from '@core/animations/slide';\n\n@Component({\n  selector: 'app-departamento',\n  templateUrl: './departamento.component.html',\n  styleUrls: ['./departamento.component.scss'],\n  animations: [ slideDownInOut ]\n})\nexport class DepartamentoComponent implements OnInit, OnDestroy {\n\n\n  subscription: Subscription;\n\n  p: number = 1;\n  itemsPerPage: number = 12;\n  currentPage: number = 1;\n  totalItem: number = 0;\n  search: string = '';\n  isLoading: boolean = false;\n  viewDepart: boolean = true;\n  viewSector: string = 'out';\n  init: boolean = false;\n\n  loja: any = [];\n  menu: any = [];\n  items$: Observable<Ofertas[]>;\n  menuSector$: Observable<MenuSetor[]>;\n  menuDepartamento$: Observable<MenuDepartamento[]>;\n\n  slug$: Observable<string>;\n\n  constructor(\n    private router: Router,\n    private db: DataService,\n    private seo: SeoService,\n    private util: UtilService,\n    private act: ActivatedRoute,\n    private storageMap: StorageMap\n  ) { }\n\n  ngOnInit(): void {\n    this.seo.addCanonical();\n    this.loja = this.util.StorageParse('Loja');\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.getDepartamento(data));\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) { this.subscription.unsubscribe(); }\n  }\n\n  getDepartamento = (slug: any) => {\n    console.log(slug);\n    this.menuDepartamento$ = this.db.getMenuOfertas(`menuDepartamentoSlug?slug=${slug}`).pipe(\n      map((res) => res[0]),\n      tap(({ nome, codigo }) => this.proccess(nome, codigo)),\n    )\n  }\n\n  private proccess = (nome: string, codigo: number) => {\n    this.getSeo(nome);\n    this.getData(codigo)\n  }\n\n  getData = (codigo: number) => {\n    this.isLoading = true;\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      this.menuSector$ = this.db.getCollection(`/Menus/MenuSectorOfertasLojaDepartamento?loja=${loja}&departamento=${codigo}`);\n      this.items$ = this.db.OfertasLojaDepartamento(loja, codigo).pipe(\n        tap((res) => this.totalItem = res.length),\n        finalize(() => this.isLoading = false));\n    })\n  }\n\n  getMenuDepartamento = (loja: number) => this.menu = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaDepartamento?loja=${loja}`);\n\n  onSearch = (e: any) => console.log(e.target.value);\n  toogleSector = () =>  this.viewSector = this.viewSector === 'out' ? 'in' : 'out';;\n  toogleDepart = () =>  this.viewDepart = !this.viewDepart;\n\n  getSeo = (departamento: string) => {\n    this.seo.updateTags({\n      title: `Confira as Ofertas de ${departamento} | Condor.com.br`,\n      description: 'Compre Online, Confira os Tabloides ou encontre o Supermercado Condor mais próximo! Toda loja em até 6x, Bazar em até 10x e Eletro em até 20x Sem Juros*',\n      image: 'https://www.condor.com.br/assets/images/sem-imagem.jpg'\n    });\n    this.seo.addCanonical();\n    this.seo.dataLayerPage(departamento);\n  }\n\n  pageChange = (ev: any) => {\n    console.log(ev);\n    this.itemsPerPage = ev -1;\n    const data = this.items$.pipe(map((res) => res.slice(this.itemsPerPage, this.itemsPerPage)))\n    this.items$ = data;\n  }\n\n  trackById = (index: number, items: any) => items[index];\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filtro'\n})\nexport class FiltroPipe implements PipeTransform {\n\n  transform(items: any[], searchText: string, fieldName: string): any {\n    if (!items) { return []; }\n    if (!searchText) { return items; }\n    searchText = `${searchText}`.toLowerCase();\n    return items.filter(item => {\n      if (item && item['produtos'][fieldName]) {\n        return `${item['produtos'][fieldName]}`.toLowerCase().includes(searchText);\n      }\n      return false;\n    });\n  }\n\n}\n"]}