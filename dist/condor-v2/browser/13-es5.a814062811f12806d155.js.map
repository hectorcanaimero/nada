{"version":3,"sources":["webpack:///src/app/@pages/ofertas/departamento/departamento.component.html","webpack:///src/app/@pages/ofertas/departamento/departamento.module.ts","webpack:///src/app/@pages/ofertas/departamento/departamento.component.ts","webpack:///src/app/@core/pipes/filtro.pipe.ts"],"names":["DepartamentoComponent","DepartamentoModule","app","path","component","router","db","seo","util","act","storageMap","p","search","isLoading","viewDepart","viewSector","init","loja","menu","getDepartamento","slug","console","log","this","menuDepartamento$","getMenuOfertas","pipe","map","res","tap","nome","codigo","proccess","delay","getSeo","getData","watch","subscribe","menuSector$","getCollection","items$","OfertasLojaDepartamento","finalize","getMenuDepartamento","onSearch","e","target","value","toogleSector","toogleDepart","departamento","updateTags","title","description","image","addCanonical","dataLayerPage","trackById","index","items","StorageParse","slug$","paramMap","paramsMap","get","data","subscription","unsubscribe","slide","loadChildren","then","mod","SectorModule","forChild","FiltroPipe","searchText","fieldName","toLowerCase","filter","item","includes"],"mappings":"2zBAiBc,iBACE,YACE,eACE,QACF,OACF,OACF,Q,qCAJoB,mDACd,gC,yBAYR,iBACE,yBACF,Q,uBADe,wB,uIAjC3B,oBACE,gBACE,2BACE,gC,gBACoD,QAAuB,OAC7E,OACA,eAA+C,QAAuB,OACtE,gBACE,gBACE,6BACA,kBACE,iBAAyC,iEACvC,SACA,gBACF,OACA,kBACE,kBACE,wB,iBAOF,OACF,OACF,OACF,OACA,kBACE,kBACE,kBACE,kBACA,wB,uDAGF,OACF,OACA,kBACE,kCACE,4DACF,OACF,OACF,OACF,OACF,OACF,O,8BAzCQ,yDAAkD,qBAEP,qBAMvC,6BAC2B,0DAGC,6CACG,kDAAyD,4BAe/C,2GAAwI,6B,qBAc7L,uBChCA,ICOaA,EDWAC,EAlBPC,EAAc,CAClB,CAAEC,KAAM,QAASC,WCMNJ,EAAN,WAmBL,WACUK,EACAC,EACAC,EACAC,EACAC,EACAC,wBALA,KAAAL,SACA,KAAAC,KACA,KAAAC,MACA,KAAAC,OACA,KAAAC,MACA,KAAAC,aArBV,KAAAC,EAAY,EACZ,KAAAC,OAAiB,GACjB,KAAAC,aACA,KAAAC,cACA,KAAAC,WAAqB,MACrB,KAAAC,QAEA,KAAAC,KAAY,GACZ,KAAAC,KAAY,GA2BZ,KAAAC,gBAAmBC,YACjBC,QAAQC,IAAIF,GACZG,EAAKC,kBAAoBD,EAAKjB,GAAGmB,eAAe,6BAA6BL,GAAQM,KACnF,OAAAC,EAAA,IAAKC,YAAGA,OAAKA,EAAI,MACjB,OAAAC,EAAA,IAAI,gBAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,OAAT,OAAsBR,EAAKS,SAASF,EAAMC,MAC9C,OAAAE,EAAA,GAAM,OAIF,KAAAD,SAAW,SAACF,EAAcC,GAChCR,EAAKW,OAAOJ,GACZP,EAAKY,QAAQJ,IAGf,KAAAI,QAAWJ,YACTR,EAAKV,aACLU,EAAKb,WAAW0B,MAAM,QAAQC,WAAU,YAAGpB,aACzCM,EAAKe,YAAcf,EAAKjB,GAAGiC,cAARhB,wDAAuEN,EAAvEM,yBAA4FQ,IAC/GR,EAAKiB,OAASjB,EAAKjB,GAAGmC,wBAAwBxB,EAAMc,GAAQL,KAAK,OAAAgB,EAAA,IAAS,kBAAMnB,EAAKV,qBAIzF,KAAA8B,oBAAuB1B,YAAIA,OAAaM,EAAKL,KAAOK,EAAKjB,GAAGiC,cAAc,uDAAuDtB,IAEjI,KAAA2B,SAAYC,YAACA,OAAUxB,QAAQC,IAAIuB,EAAEC,OAAOC,QAC5C,KAAAC,aAAe,kBAAOzB,EAAKR,WAAiC,QAApBQ,EAAKR,WAAuB,KAAO,OAC3E,KAAAkC,aAAe,kBAAO1B,EAAKT,YAAcS,EAAKT,YAE9C,KAAAoB,OAAUgB,YACR3B,EAAKhB,IAAI4C,WAAW,CAClBC,MAAMA,yBAADA,OAA2BF,EAA3BE,oBACLC,YAAa,uKACbC,MAAO,2DAET/B,EAAKhB,IAAIgD,eACThC,EAAKhB,IAAIiD,cAAcN,IAGzB,KAAAO,UAAY,SAACC,EAAeC,GAAhB,OAA+BA,EAAMD,IA7E5C,kCA4BL,WAAU,WACRnC,KAAKhB,IAAIgD,eACThC,KAAKN,KAAOM,KAAKf,KAAKoD,aAAa,QACnCrC,KAAKsC,MAAQtC,KAAKd,IAAIqD,SAASpC,KAAK,OAAAC,EAAA,IAAIoC,YAASA,OAAIA,EAAUC,IAAI,YACnEzC,KAAKsC,MAAMxB,WAAU4B,YAAIA,OAAI1C,EAAKJ,gBAAgB8C,QAhC/C,yBAmCL,WACM1C,KAAK2C,cAAgB3C,KAAK2C,aAAaC,kBApCxC,K,sCAAMnE,GAAqB,8D,uBAArBA,EAAqB,snCFrBlC,4B,gBA8CA,gC,MA9CgD,2CA8ClC,mC,6gCE3BA,CAAEoE,EAAA,M,IDHd,CAAEjE,KAAM,cAAekE,aAAc,kBAAM,kCAAkCC,MAAMC,YAAGA,OAAIA,EAAIC,mBAgBzF,IAAMvE,EAAN,yB,qBAAMA,I,oDAAAA,IAAkB,SAXpB,CACP,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IAAawE,SAASvE,O,wFExBnB,iBAAMwE,EAAN,qEAEL,SAAUf,EAAcgB,EAAoBC,GAC1C,OAAKjB,EACAgB,GACLA,GAAa,GAAGA,GAAaE,cACtBlB,EAAMmB,QAAOC,YAAIA,SAClBA,IAAQA,EAAe,SAAEH,MACpB,GAAGG,EAAe,SAAEH,IAAaC,cAAcG,SAASL,OAJzChB,EADL,OAHlB,K,6CAAMe,I,sCAAAA,EAAU,U,EAAhB,O","file":"x","sourcesContent":["<section id=\"departamento\" class=\"py-3 py-md-5\" *ngIf=\"(menuDepartamento$ | async) as departamento\">\n  <div class=\"container\">\n    <mdb-breadcrumb class=\"mb-5\">\n      <mdb-breadcrumb-item class=\"blue-text text-uppercase d-none d-md-block\"\n        [routerLink]=\"['/departamento', (slug$ | async)]\">{{ departamento.nome }}</mdb-breadcrumb-item>\n    </mdb-breadcrumb>\n    <h1 class=\"b-08 border-bottom pb-1 mb-3 title\">{{ departamento.nome }}</h1>\n    <div class=\"row mobile ios justify-content-center\">\n      <div class=\"col-lg-4 col-xl-3 bg-red\">\n        <app-select-loja type=\"alert\"></app-select-loja>\n        <div class=\"news my-4\">\n          <h6 class=\"b-07 border-bottom pb-1 mb-1\" (click)=\"toogleSector()\">\n            {{ departamento.nome }}\n            <i class=\"fas float-right\" [ngClass]=\"viewSector ? 'fa-plus': 'fa-minus'\"></i>\n          </h6>\n          <div class=\"sector\">\n            <div class=\"row no-gutters\" [@slideDownInOut]=\"viewSector\">\n              <div class=\"col-6 col-md-12\" *ngFor=\"let s of menuSector$ | async; trackBy: trackById\">\n                <p>\n                  <a class=\"text\" [routerLink]=\"['/departamento', departamento.slug, 'setor', s.slug]\">\n                    {{ s.sector }}\n                  </a>\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-lg-8 col-xl-9\">\n        <div class=\"mobile\">\n          <div class=\"row mt-3\">\n            <img src=\"./assets/images/banner_campanha.jpg\" onerror=\"this.style.display='none'\" class=\"img-fluid mb-4\"/>\n            <div class=\"col-6 col-md-4 mb-3 mb-xl-4\" *ngFor=\"let item of items$ | async | filtro: search:'dsc_produto'  | paginate: { itemsPerPage: 12, currentPage: p }; trackBy: trackById\">\n              <app-product [code]=\"item\"></app-product>\n            </div>\n          </div>\n        </div>\n        <div class=\"mt-5\">\n          <pagination-controls class=\"animated fade text-center mt-5 border-top pt-1\"\n            (pageChange)=\"p = $event\" previousLabel=\"Anterior\" nextLabel=\"Próximo\" responsive=\"true\">\n          </pagination-controls>\n        </div>\n      </div>\n    </div>\n  </div>\n</section>\n<app-sem-data *ngIf=\"isLoading\"></app-sem-data>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\n\nimport {NgxPaginationModule} from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\n\nimport { DepartamentoComponent } from './departamento.component';\n\nconst app: Routes = [\n  { path: ':slug', component: DepartamentoComponent },\n  { path: ':slug/setor', loadChildren: () => import('../sector/sector.module').then( mod => mod.SectorModule )}\n];\n\n@NgModule({\n  declarations: [DepartamentoComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    ProductModule,\n    SemDataModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app),\n  ]\n})\nexport class DepartamentoModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { StorageMap } from '@ngx-pwa/local-storage';\n\nimport { map, tap, delay, finalize } from 'rxjs/operators';\nimport { Subscription, Observable } from 'rxjs';\n\nimport { DataService } from '@core/services/data.service';\nimport { SeoService } from '@core/services/seo.service';\nimport { UtilService } from '@core/services/util.service';\nimport { MenuDepartamento, MenuSetor } from '@core/interfaces/menu';\nimport { Ofertas } from '@core/interfaces/ofertas';\nimport { slideDownInOut } from '@core/animations/slide';\n\n@Component({\n  selector: 'app-departamento',\n  templateUrl: './departamento.component.html',\n  styleUrls: ['./departamento.component.scss'],\n  animations: [ slideDownInOut ]\n})\nexport class DepartamentoComponent implements OnInit, OnDestroy {\n\n  subscription: Subscription;\n\n  p: number = 1;\n  search: string = '';\n  isLoading: boolean = false;\n  viewDepart: boolean = true;\n  viewSector: string = 'out';\n  init: boolean = false;\n\n  loja: any = [];\n  menu: any = [];\n  items$: Observable<Ofertas[]>;\n  menuSector$: Observable<MenuSetor[]>;\n  menuDepartamento$: Observable<MenuDepartamento[]>;\n\n  slug$: Observable<string>;\n\n  constructor(\n    private router: Router,\n    private db: DataService,\n    private seo: SeoService,\n    private util: UtilService,\n    private act: ActivatedRoute,\n    private storageMap: StorageMap\n  ) { }\n\n  ngOnInit(): void {\n    this.seo.addCanonical();\n    this.loja = this.util.StorageParse('Loja');\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.getDepartamento(data));\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) { this.subscription.unsubscribe(); }\n  }\n\n  getDepartamento = (slug: any) => {\n    console.log(slug);\n    this.menuDepartamento$ = this.db.getMenuOfertas(`menuDepartamentoSlug?slug=${slug}`).pipe(\n      map((res) => res[0]),\n      tap(({ nome, codigo }) => this.proccess(nome, codigo)),\n      delay(1000)\n    )\n  }\n\n  private proccess = (nome: string, codigo: number) => {\n    this.getSeo(nome);\n    this.getData(codigo)\n  }\n\n  getData = (codigo: number) => {\n    this.isLoading = true;\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      this.menuSector$ = this.db.getCollection(`/Menus/MenuSectorOfertasLojaDepartamento?loja=${loja}&departamento=${codigo}`);\n      this.items$ = this.db.OfertasLojaDepartamento(loja, codigo).pipe(finalize(() => this.isLoading = false));\n    })\n  }\n\n  getMenuDepartamento = (loja: number) => this.menu = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaDepartamento?loja=${loja}`);\n\n  onSearch = (e: any) => console.log(e.target.value);\n  toogleSector = () =>  this.viewSector = this.viewSector === 'out' ? 'in' : 'out';;\n  toogleDepart = () =>  this.viewDepart = !this.viewDepart;\n\n  getSeo = (departamento: string) => {\n    this.seo.updateTags({\n      title: `Confira as Ofertas de ${departamento} | Condor.com.br`,\n      description: 'Compre Online, Confira os Tabloides ou encontre o Supermercado Condor mais próximo! Toda loja em até 6x, Bazar em até 10x e Eletro em até 20x Sem Juros*',\n      image: 'https://www.condor.com.br/assets/images/sem-imagem.jpg'\n    });\n    this.seo.addCanonical();\n    this.seo.dataLayerPage(departamento);\n  }\n\n  trackById = (index: number, items: any) => items[index];\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'filtro'\n})\nexport class FiltroPipe implements PipeTransform {\n\n  transform(items: any[], searchText: string, fieldName: string): any {\n    if (!items) { return []; }\n    if (!searchText) { return items; }\n    searchText = `${searchText}`.toLowerCase();\n    return items.filter(item => {\n      if (item && item['produtos'][fieldName]) {\n        return `${item['produtos'][fieldName]}`.toLowerCase().includes(searchText);\n      }\n      return false;\n    });\n  }\n\n}\n"]}