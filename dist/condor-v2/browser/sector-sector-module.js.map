{"version":3,"sources":["./src/app/@pages/ofertas/sector/sector.component.ts","./src/app/@pages/ofertas/sector/sector.component.html","./src/app/@pages/ofertas/sector/sector.module.ts"],"names":[],"mappings":"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","file":"sector-sector-module.js","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { StorageMap } from '@ngx-pwa/local-storage';\nimport { Subscription, Observable } from 'rxjs';\nimport { delay, map, tap, debounceTime } from 'rxjs/operators';\n\nimport { SeoService } from '@core/services/seo.service';\nimport { UtilService } from '@core/services/util.service';\nimport { DataService } from '@core/services/data.service';\nimport { MenuSetor } from '@core/interfaces/menu';\nimport { Ofertas } from '@core/interfaces/ofertas';\n\n@Component({\n  selector: 'app-sector',\n  templateUrl: './sector.component.html',\n  styleUrls: ['./sector.component.scss']\n})\nexport class SectorComponent implements OnInit, OnDestroy {\n\n  subscription: Subscription;\n\n  p: number = 1;\n  search: string = '';\n\n  viewDepart: boolean = true;\n  viewSector: boolean = true;\n  init: boolean = false;\n\n  url: any = [];\n  menu: any = [];\n  sector$: Observable<MenuSetor[]>;\n\n  slug$: Observable<string>;\n  items$: Observable<Ofertas[]>;\n  menuSector$: Observable<MenuSetor>;\n\n  constructor(\n    private router: Router,\n    private db: DataService,\n    private seo: SeoService,\n    private util: UtilService,\n    private act: ActivatedRoute,\n    private storageMap: StorageMap,\n  ) { }\n\n  ngOnInit(): void {\n    this.slug$ = this.act.paramMap.pipe(map(paramsMap => paramsMap.get('slug')));\n    this.slug$.subscribe(data => this.proccess(data));\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) { this.subscription.unsubscribe(); }\n  }\n\n  private proccess = (slug: any) => {\n    this.seo.addCanonical();\n    this.getSector(slug)\n  }\n\n  getSector = (slug: string) => {\n    this.url = { nome: this.router.url.split('/')[2], link: this.util.toSlug(this.router.url.split('/')[2]) };\n    this.menuSector$ = this.db.getMenuOfertas(`menuSetorSlug?slug=${slug}`).pipe(\n      map((res) => res[0]), tap(({ dep_id, codigo }) => this.watchStorage(dep_id, codigo), debounceTime(1000))\n    );\n  }\n\n  private watchStorage = (depId: number, codigo: number) => {\n    this.storageMap.watch('Loja').subscribe(({ loja }) => {\n      this.getMenuDepartamento(loja);\n      this.sector$ = this.db.getCollection(`/Menus/MenuSectorOfertasLojaDepartamento?loja=${loja}&departamento=${depId}`);\n      this.items$ = this.db.OfertasLojaDepartamentoSetor(loja, depId, codigo).pipe(\n        map((data) => data.filter((row) => row.produtos))\n      );\n    })\n  }\n\n\n  getMenuDepartamento = (loja: number) => this.menu = this.db.getCollection(`/Menus/MenuDepartamentoOfertasLojaDepartamento?loja=${loja}`);\n\n  toogle = () => this.viewSector = !this.viewSector;\n  busca = (e: any) => this.search = e.target.value;\n\n  private Seo = (title: string) => {\n    this.seo.addCanonical();\n    this.seo.setTitle(`${title} | Rede Condor`);\n    this.seo.updateTagName(`${title} | Rede Condor`);\n    this.seo.dataLayerPage(title);\n  }\n}\n","<section id=\"sector\" class=\"py-5\" *ngIf=\"(menuSector$ | async) as path; else semData\">\n  <div class=\"container\">\n    <mdb-breadcrumb class=\"mb-5\">\n      <mdb-breadcrumb-item class=\"blue-text text-uppercase\" [routerLink]=\"['/departamento', url.link]\">\n        {{url.nome}}</mdb-breadcrumb-item>\n      <mdb-breadcrumb-item class=\"text-muted text-uppercase\"> {{ path['nome'] }} </mdb-breadcrumb-item>\n    </mdb-breadcrumb>\n    <div class=\"row ios justify-content-center\">\n      <div class=\"col-lg-4 col-xl-3 bg-red\">\n        <app-select-loja type=\"alert\"></app-select-loja>\n        <h5 class=\"border-bottom pb-1 b-06 my-4 text-capitalize\">{{url.nome}}</h5>\n        <div class=\"news my-4\">\n          <h5 class=\"b-07 border-bottom pb-1 mb-1\" (click)=\"toogle()\">\n            Setor <i class=\"fas float-right\" [ngClass]=\"{'fa-plus': !viewSector, 'fa-minus': viewSector}\"></i>\n          </h5>\n          <ul class=\"nav flex-column grey lighten-4 py-2 animated fadeIn faster\" data-wow-delay=\".1\" *ngIf=\"viewSector\">\n            <li class=\"nav-item\" *ngFor=\"let n of sector$ | async\" routerLinkActive=\"active\">\n              <a class=\"nav-link b-07 f-09\" [routerLink]=\"['/departamento', url.link, 'setor', n.slug]\">\n                {{ n.sector }}\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n        <div class=\"col-lg-8 col-xl-9\">\n          <h1 class=\"b-08 border-bottom pb-1 mb-3 text-capitalize\">{{ path['nome']  }}</h1>\n          <img src=\"./assets/images/banner_campanha.jpg\" onerror=\"this.style.display='none'\" class=\"img-fluid mb-4\"/>\n          <input type=\"text\" class=\"form-control\" placeholder=\"Procure produtos deste setor\" (change)=\"busca($event)\">\n          <div class=\"row mt-3\">\n            <div class=\"col-6 col-md-4 col-lg-4 col-xl-4 mb-3\"\n              *ngFor=\"let item of items$ | async | filtro: search:'dsc_produto'  | paginate: { itemsPerPage: 6, currentPage: p }; let i = index\">\n              <app-product [code]=\"item\"></app-product>\n            </div>\n          </div>\n          <div class=\"mt-5\">\n            <pagination-controls class=\"animated fade text-center mt-5 border-top pt-1\"\n                (pageChange)=\"p = $event\" previousLabel=\"Anterior\" nextLabel=\"PrÃ³ximo\" responsive=\"true\">\n            </pagination-controls>\n          </div>\n        </div>\n    </div>\n  </div>\n</section>\n<ng-template #semData>\n  <app-sem-data></app-sem-data>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NgxPaginationModule } from 'ngx-pagination';\nimport { MDBBootstrapModule } from 'angular-bootstrap-md';\n\nimport { PipesModule } from '@core/pipes/pipes.module';\nimport { SemDataModule } from '@sharing/sem-data/sem-data.module';\nimport { ProductModule } from '@sharing/product/product.module';\nimport { SelectLojaModule } from '@sharing/select-loja/select-loja.module';\n\nimport { SectorComponent } from './sector.component';\n\nconst app: Routes = [\n  { path: ':slug', component: SectorComponent },\n];\n\n@NgModule({\n  declarations: [SectorComponent],\n  imports: [\n    PipesModule,\n    CommonModule,\n    SemDataModule,\n    ProductModule,\n    SelectLojaModule,\n    MDBBootstrapModule,\n    NgxPaginationModule,\n    RouterModule.forChild(app)\n  ]\n})\nexport class SectorModule { }\n"],"sourceRoot":"webpack:///"}